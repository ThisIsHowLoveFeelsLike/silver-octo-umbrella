local components = loadstring(game:HttpGet("https://raw.githubusercontent.com/frzfrsy/School/main/source.lua"))()

local form = components:New(
	"Banana Eats\nc r e e p s t u",
	Color3.new(0, 0, 0),
	Color3.new(0, 0, 0),
	0
)

local RunService = game:GetService("RunService")
local coinLoopConn
local coinRunning = false

local function getTokensFolder()
    local gk = workspace:FindFirstChild("GameKeeper")
    if not gk then return nil end
    local map = gk:FindFirstChild("Map")
    if not map then return nil end
    return map:FindFirstChild("Tokens")
end

local function getHRP()
    local player = game.Players.LocalPlayer
    if not player then return nil end
    local char = player.Character
    if not char then return nil end
    return char:FindFirstChild("HumanoidRootPart")
end

form:Toggle("Collect Coins", "Picks up all the coins in the map.", function(state)
    coinRunning = state

    if state then
        if coinLoopConn then coinLoopConn:Disconnect() end
        coinLoopConn = RunService.Heartbeat:Connect(function()
            if not coinRunning then return end

            local hrp = getHRP()
            if not hrp then return end

            local tokensFolder = getTokensFolder()
            if not tokensFolder then return end

            for _, y in ipairs(tokensFolder:GetChildren()) do
                if y and y.Parent and y:IsA("Part") and y.Name == "Token" then
                    pcall(function()
                        firetouchinterest(y, hrp, 0)
                        task.wait(0.05)
                        firetouchinterest(y, hrp, 1)
                    end)
                end
            end
        end)

        game.Players.LocalPlayer.CharacterAdded:Connect(function()
            coinRunning = true
        end)
    else
        if coinLoopConn then
            coinLoopConn:Disconnect()
            coinLoopConn = nil
        end
    end
end)

form:Toggle("Collect Power-ups", "Picks up all the power-ups in the map.", function(state)
    local collecting = state

    task.spawn(function()
        while collecting do
            local mapFolder = workspace:FindFirstChild("GameKeeper")
            if mapFolder then
                mapFolder = mapFolder:FindFirstChild("Map")
            end

            if mapFolder then
                local tokensFolder = mapFolder:FindFirstChild("Tokens")
                if tokensFolder then
                    local player = game.Players.LocalPlayer
                    local character = player and player.Character
                    local rootPart = character and character:FindFirstChild("HumanoidRootPart")

                    if rootPart then
                        for _, token in ipairs(tokensFolder:GetChildren()) do
                            if token:IsA("MeshPart") then
                                firetouchinterest(token, rootPart, 0)
                                task.wait(0.1)
                            end
                        end
                    end
                end
            end

            task.wait(0.5)
        end
    end)
end)

form:Toggle("Show Cakes", "Adds a sensory perception to Cakes.", function(state)
    local labeling = state

    task.spawn(function()
        while labeling do
            local mapFolder = workspace:FindFirstChild("GameKeeper")
            if mapFolder then
                mapFolder = mapFolder:FindFirstChild("Map")
            end

            if mapFolder then
                local itemsFolder = mapFolder:FindFirstChild("Items")
                if itemsFolder then
                    for _, item in ipairs(itemsFolder:GetChildren()) do
                        if item:IsA("Model") and item.Name == "CakePlate" then
                            if not item:FindFirstChild("CakeLabel") then

                                local billboard = Instance.new("BillboardGui")
                                billboard.Name = "CakeLabel"
                                billboard.Size = UDim2.new(1, 25, 1, 15)
                                billboard.StudsOffset = Vector3.new(0, 3, 0)
                                billboard.AlwaysOnTop = true
                                billboard.Parent = item

                                local textLabel = Instance.new("TextLabel")
                                textLabel.Size = UDim2.new(1, 0, 1, 0)
                                textLabel.BackgroundTransparency = 1
                                textLabel.Text = "CAKE"
                                textLabel.TextColor3 = Color3.fromRGB(255, 215, 0)
                                textLabel.TextStrokeTransparency = 0
                                textLabel.Font = Enum.Font.Roboto
                                textLabel.TextScaled = true
                                textLabel.Parent = billboard
                            end
                        end
                    end
                end
            end

            task.wait(1) 

        end
    end)
end)

local RunService = game:GetService("RunService")
local ventsLoopConn
local ventsRunning = false

form:Toggle("Show Vents", "Highlights all the crawl ways", function(state)
    ventsRunning = state

    if state then

        if ventsLoopConn then ventsLoopConn:Disconnect() end
        ventsLoopConn = RunService.Heartbeat:Connect(function()
            if not ventsRunning then return end

            local gk = workspace:FindFirstChild("GameKeeper")
            if not gk then return end
            local map = gk:FindFirstChild("Map")
            if not map then return end
            local ventsFolder = map:FindFirstChild("Vents")
            if not ventsFolder then return end

            for _, v in ipairs(ventsFolder:GetDescendants()) do
                if v and v:IsA("Model") and v.Name == "Crawlway" then
                    if not v:FindFirstChildOfClass("Highlight") then
                        local hl = Instance.new("Highlight")
                        hl.Name = "VentHighlight"
                        hl.FillColor = Color3.fromRGB(0, 255, 255) 

                        hl.OutlineColor = Color3.fromRGB(0, 0, 0) 

                        hl.FillTransparency = 0.5
                        hl.OutlineTransparency = 0
                        hl.Parent = v
                    end
                end
            end
        end)
    else

        ventsRunning = false
        if ventsLoopConn then
            ventsLoopConn:Disconnect()
            ventsLoopConn = nil
        end

        local gk = workspace:FindFirstChild("GameKeeper")
        if gk and gk:FindFirstChild("Map") and gk.Map:FindFirstChild("Vents") then
            for _, v in ipairs(gk.Map.Vents:GetDescendants()) do
                if v and v:IsA("Model") and v.Name == "Crawlway" then
                    local hl = v:FindFirstChild("VentHighlight")
                    if hl then hl:Destroy() end
                end
            end
        end
    end
end)

local RunService = game:GetService("RunService")
local bananaLoopConn
local bananaRunning = false

form:Toggle("Show Banana", "Where the fuck is the banana?", function(state)
    bananaRunning = state

    if state then

        if bananaLoopConn then bananaLoopConn:Disconnect() end
        bananaLoopConn = RunService.Heartbeat:Connect(function()
            if not bananaRunning then return end

            local bananasFolder = workspace:FindFirstChild("GameBananas")
            if not bananasFolder then return end

            for _, folder in ipairs(bananasFolder:GetChildren()) do
                if folder and folder:IsA("Folder") and folder.Name ~= "LobbyBananaAI" then
                    for _, model in ipairs(folder:GetChildren()) do
                        if model and model:IsA("Model") then
                            if not model:FindFirstChildOfClass("Highlight") then
                                local hl = Instance.new("Highlight")
                                hl.Name = "BananaHighlight"
                                hl.FillColor = Color3.fromRGB(255, 255, 0) 

                                hl.OutlineColor = Color3.fromRGB(0, 0, 0)
                                hl.FillTransparency = 0.3
                                hl.OutlineTransparency = 0
                                hl.Parent = model
                            end
                        end
                    end
                end
            end
        end)
    else
        bananaRunning = false
        if bananaLoopConn then
            bananaLoopConn:Disconnect()
            bananaLoopConn = nil
        end

        local bananasFolder = workspace:FindFirstChild("GameBananas")
        if bananasFolder then
            for _, folder in ipairs(bananasFolder:GetChildren()) do
                if folder and folder:IsA("Folder") and folder.Name ~= "LobbyBananaAI" then
                    for _, model in ipairs(folder:GetChildren()) do
                        if model and model:IsA("Model") then
                            local hl = model:FindFirstChild("BananaHighlight")
                            if hl then hl:Destroy() end
                        end
                    end
                end
            end
        end
    end
end)

local RunService = game:GetService("RunService")
local runnersLoopConn
local runnersRunning = false

form:Toggle("Show Runners", "Shows all Runners.", function(state)
    runnersRunning = state

    if state then
        if runnersLoopConn then runnersLoopConn:Disconnect() end
        runnersLoopConn = RunService.Heartbeat:Connect(function()
            if not runnersRunning then return end

            local localPlayer = game.Players.LocalPlayer

            for _, player in ipairs(game.Players:GetPlayers()) do
                if player ~= localPlayer and player.Team and player.Team.Name == "Runners" then
                    local char = player.Character
                    if char then
                        local torso = char:FindFirstChild("Torso") or char:FindFirstChild("UpperTorso")
                        local color = Color3.fromRGB(0, 255, 0)
                        if torso and torso:IsA("BasePart") then
                            color = torso.Color
                        end

                        if not char:FindFirstChild("RunnerHighlight") then
                            local hl = Instance.new("Highlight")
                            hl.Name = "RunnerHighlight"
                            hl.FillColor = color
                            hl.OutlineColor = Color3.fromRGB(0, 0, 0)
                            hl.FillTransparency = 0.3
                            hl.OutlineTransparency = 0
                            hl.Parent = char
                        else
                            char.RunnerHighlight.FillColor = color
                        end
                    end
                end
            end
        end)
    else
        runnersRunning = false
        if runnersLoopConn then
            runnersLoopConn:Disconnect()
            runnersLoopConn = nil
        end

        for _, player in ipairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer then
                local char = player.Character
                if char then
                    local hl = char:FindFirstChild("RunnerHighlight")
                    if hl then hl:Destroy() end
                end
            end
        end
    end
end)

local RunService = game:GetService("RunService")
local peelLoopConn
local peelRunning = false

form:Toggle("No Peel Touch", "Fuck the traps.", function(state)
    peelRunning = state

    if state then
        if peelLoopConn then peelLoopConn:Disconnect() end
        peelLoopConn = RunService.Heartbeat:Connect(function()
            if not peelRunning then return end

            local gk = workspace:FindFirstChild("GameKeeper")
            if not gk then return end
            local map = gk:FindFirstChild("Map")
            if not map then return end
            local peelsFolder = map:FindFirstChild("Peels")
            if not peelsFolder then return end

            for _, obj in ipairs(peelsFolder:GetDescendants()) do
                if obj and obj:IsA("MeshPart") and obj.Name == "Root" then
                    if obj.CanTouch then
                        obj.CanTouch = false
                    end
                end
            end
        end)
    else
        peelRunning = false
        if peelLoopConn then
            peelLoopConn:Disconnect()
            peelLoopConn = nil
        end

        local gk = workspace:FindFirstChild("GameKeeper")
        if gk and gk:FindFirstChild("Map") and gk.Map:FindFirstChild("Peels") then
            for _, obj in ipairs(gk.Map.Peels:GetDescendants()) do
                if obj and obj:IsA("MeshPart") and obj.Name == "Root" then
                    obj.CanTouch = true
                end
            end
        end
    end
end)

local RunService = game:GetService("RunService")
local exitsLoopConn
local exitsRunning = false

form:Toggle("Auto-Escape the Map", "Auto escapes the map from Banana.", function(state)
    exitsRunning = state

    if state then

        if exitsLoopConn then exitsLoopConn:Disconnect() end
        exitsLoopConn = RunService.Heartbeat:Connect(function()
            if not exitsRunning then return end

            local player = game.Players.LocalPlayer
            if not player or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
                return
            end
            local hrp = player.Character.HumanoidRootPart

            local gk = workspace:FindFirstChild("GameKeeper")
            if not gk then return end
            local exitsFolder = gk:FindFirstChild("Exits")
            if not exitsFolder then return end

            for _, model in ipairs(exitsFolder:GetChildren()) do
                if model and model:IsA("Model") then
                    local rootPart = model:FindFirstChild("Root")
                    if rootPart and rootPart:IsA("BasePart") then
                        pcall(function()
                            firetouchinterest(rootPart, hrp, 0)
                            task.wait(0.05)
                            firetouchinterest(rootPart, hrp, 1)
                        end)
                    end
                end
            end
        end)
    else
        exitsRunning = false
        if exitsLoopConn then
            exitsLoopConn:Disconnect()
            exitsLoopConn = nil
        end
    end
end)

local RunService = game:GetService("RunService")
local barrelLoopConn
local barrelRunning = false

form:Toggle("Auto-Claim Bonus Barrel", "Auto claims the Bonus Barrel in the lobby.", function(state)
    barrelRunning = state

    if state then

        if barrelLoopConn then barrelLoopConn:Disconnect() end
        barrelLoopConn = RunService.Heartbeat:Connect(function()
            if not barrelRunning then return end

            local player = game.Players.LocalPlayer
            if not player or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
                return
            end
            local hrp = player.Character.HumanoidRootPart

            local barrel = workspace:FindFirstChild("BonusBarrel")
            if not barrel then return end

            local rootPart = barrel:FindFirstChild("Root")
            if rootPart and rootPart:IsA("BasePart") then
                pcall(function()
                    firetouchinterest(rootPart, hrp, 0)
                    task.wait(0.05)
                    firetouchinterest(rootPart, hrp, 1)
                end)
            end
        end)
    else

        barrelRunning = false
        if barrelLoopConn then
            barrelLoopConn:Disconnect()
            barrelLoopConn = nil
        end
    end
end)

form:Toggle("No Clip", "Walk through walls by disabling collisions.", function(state)
    local connection

    if state then
        connection = game:GetService("RunService").Stepped:Connect(function()
            local player = game.Players.LocalPlayer
            local character = player and player.Character
            if character then
                for _, child in ipairs(character:GetDescendants()) do
                    if child:IsA("BasePart") and child.CanCollide and child.Name ~= "HumanoidRootPart" then
                        child.CanCollide = false
                    end
                end
            end
        end)
    else
        if connection then
            connection:Disconnect()
            connection = nil
        end
    end
end)

form:Toggle("Lag Reduction", "Reduce lag by lowering graphics-heavy properties", function(state)
    if state then

        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01 

        workspace.StreamingEnabled = true
        workspace.InterpolationThrottling = Enum.InterpolationThrottlingMode.Disabled

        game.Lighting.GlobalShadows = false

        game.Lighting.FogEnd = 1e6
        game.Lighting.FogStart = 1e6
        game.Lighting.FogColor = Color3.fromRGB(255, 255, 255) 

        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("BasePart") then
                obj.CastShadow = false
                obj.Material = Enum.Material.Plastic
            elseif obj:IsA("ParticleEmitter") or obj:IsA("Trail") then
                obj.Enabled = false
            end
        end
    else

        settings().Rendering.QualityLevel = Enum.QualityLevel.Automatic
        workspace.StreamingEnabled = false
        workspace.InterpolationThrottling = Enum.InterpolationThrottlingMode.Default
        game.Lighting.GlobalShadows = true

        game.Lighting.FogEnd = 1000
        game.Lighting.FogStart = 0
        game.Lighting.FogColor = Color3.fromRGB(128, 128, 128)

        for _, obj in ipairs(workspace:GetDescendants()) do
            if obj:IsA("BasePart") then
                obj.CastShadow = true
            elseif obj:IsA("ParticleEmitter") or obj:IsA("Trail") then
                obj.Enabled = true
            end
        end
	end
end)

local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")

form:Toggle("Lag Reduction PT II", "Continuously optimizes visuals safely.", function(state)
    local running = state
    local connection

    task.spawn(function()
        while running do

            local Terrain = workspace:FindFirstChildWhichIsA("Terrain")
            if Terrain then
                Terrain.WaterWaveSize = 0
                Terrain.WaterWaveSpeed = 0
                Terrain.WaterReflectance = 0
                Terrain.WaterTransparency = 1
            end

            Lighting.GlobalShadows = false
            Lighting.FogEnd = 9e9
            Lighting.FogStart = 9e9
            settings().Rendering.QualityLevel = Enum.QualityLevel.Level01

            for _, v in ipairs(game:GetDescendants()) do
                if v:IsA("BasePart") then
                    v.CastShadow = false
                    v.Material = Enum.Material.Plastic
                    v.Reflectance = 0
                    v.BackSurface = Enum.SurfaceType.SmoothNoOutlines
                    v.BottomSurface = Enum.SurfaceType.SmoothNoOutlines
                    v.FrontSurface = Enum.SurfaceType.SmoothNoOutlines
                    v.LeftSurface = Enum.SurfaceType.SmoothNoOutlines
                    v.RightSurface = Enum.SurfaceType.SmoothNoOutlines
                    v.TopSurface = Enum.SurfaceType.SmoothNoOutlines
                elseif v:IsA("Decal") then
                    v.Transparency = 1
                    v.Texture = ""
                elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
                    v.Lifetime = NumberRange.new(0)
                end
            end

            for _, v in ipairs(Lighting:GetDescendants()) do
                if v:IsA("PostEffect") then
                    v.Enabled = false
                end
            end

            task.wait(2) 

        end
    end)

    if state then
        connection = workspace.DescendantAdded:Connect(function(child)
            task.spawn(function()
                if child:IsA("ForceField") or child:IsA("Sparkles") or child:IsA("Smoke") or child:IsA("Fire") or child:IsA("Beam") then
                    RunService.Heartbeat:Wait()
                    if running and child.Parent then
                        child:Destroy()
                    end
                elseif child:IsA("BasePart") then
                    child.CastShadow = false
                end
            end)
        end)
    else
        if connection then
            connection:Disconnect()
            connection = nil
        end
    end
end)

form:TextBox("Walk Speed", "Change your walk speed, input only numeric because you want the speed value not ABC.", function(val)
	game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = val
end)

form:TextBox("Jump Power", "Change your jump power, input only numeric because you want the power value not ABC.", function(val)
	game.Players.LocalPlayer.Character.Humanoid.JumpPower = val
end)
